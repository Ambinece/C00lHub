local MainLibrary = {}

function MainLibrary:CreateUI(title)
    local Gui = Instance.new("ScreenGui")
    Gui.Name = "C00lGUI"
    Gui.ResetOnSpawn = false
    Gui.Parent = game.CoreGui

    local TopBar = Instance.new("Frame")
    TopBar.Name = "TopBar"
    TopBar.Size = UDim2.new(0, 400, 0, 35)
    TopBar.Position = UDim2.new(0.3, 0, 0.2, 0)
    TopBar.BackgroundColor3 = Color3.new(0, 0, 0)
    TopBar.BorderColor3 = Color3.new(1, 0, 0)
    TopBar.BorderSizePixel = 3
    TopBar.Parent = Gui
    TopBar.Active = true
    TopBar.Draggable = true

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1, 0, 1, 0)
    Label.BackgroundTransparency = 1
    Label.Text = title
    Label.TextColor3 = Color3.new(1, 1, 1)
    Label.Font = Enum.Font.SourceSansBold
    Label.TextSize = 22
    Label.Parent = TopBar

    local ButtonHolder = Instance.new("Frame")
    ButtonHolder.Name = "ButtonHolder"
    ButtonHolder.Size = UDim2.new(1, 0, 0, 300)
    ButtonHolder.Position = UDim2.new(0, 0, 1, 0)
    ButtonHolder.BackgroundTransparency = 1
    ButtonHolder.Parent = TopBar

    local Layout = Instance.new("UIListLayout")
    Layout.Padding = UDim.new(0, 5)
    Layout.Parent = ButtonHolder

    local ToggleState = {}

    local Interface = {}

    function Interface:CreateButton(name, callback)
        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(1, -10, 0, 40)
        Button.Text = name
        Button.TextColor3 = Color3.new(1, 1, 1)
        Button.BackgroundColor3 = Color3.new(0, 0, 0)
        Button.BorderColor3 = Color3.new(1, 0, 0)
        Button.Parent = ButtonHolder

        Button.MouseButton1Click:Connect(function()
            pcall(callback)
        end)
    end

    function Interface:CreateToggle(name, callback)
        local state = false

        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(1, -10, 0, 40)
        toggle.Text = name .. ": Off"
        toggle.TextColor3 = Color3.new(1, 1, 1)
        toggle.BackgroundColor3 = Color3.new(0, 0, 0)
        toggle.BorderColor3 = Color3.new(1, 0, 0)
        toggle.Parent = ButtonHolder

        toggle.MouseButton1Click:Connect(function()
            state = not state
            toggle.Text = name .. ": " .. (state and "On" or "Off")
            pcall(callback, state)
        end)

        ToggleState[name] = state
    end

    return Interface
end

return MainLibrary
