local MainLibrary = {}

function MainLibrary:CreateUI(title)
    local player = game:GetService("Players").LocalPlayer
    local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
    gui.Name = "C00lGUI"
    gui.ResetOnSpawn = false

    local topBar = Instance.new("Frame")
    topBar.Name = "TopBar"
    topBar.Size = UDim2.new(0, 400, 0, 35)
    topBar.Position = UDim2.new(0.3, 0, 0.2, 0)
    topBar.BackgroundColor3 = Color3.new(0, 0, 0)
    topBar.BorderColor3 = Color3.new(1, 0, 0)
    topBar.BorderSizePixel = 3
    topBar.Parent = gui
    topBar.Active = true
    topBar.Draggable = true

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = title or "C00lGUI"
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 22
    label.Parent = topBar

    local buttonHolder = Instance.new("Frame")
    buttonHolder.Name = "ButtonHolder"
    buttonHolder.Size = UDim2.new(1, 0, 0, 300)
    buttonHolder.Position = UDim2.new(0, 0, 1, 0)
    buttonHolder.BackgroundTransparency = 1
    buttonHolder.Parent = topBar

    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, 5)
    layout.Parent = buttonHolder

    local toggleState = {}

    local interface = {}

    function interface:CreateButton(name, callback)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, -10, 0, 40)
        button.Text = name
        button.TextColor3 = Color3.new(1, 1, 1)
        button.BackgroundColor3 = Color3.new(0, 0, 0)
        button.BorderColor3 = Color3.new(1, 0, 0)
        button.Parent = buttonHolder

        button.MouseButton1Click:Connect(function()
            pcall(callback)
        end)
    end

    function interface:CreateToggle(name, callback)
        local state = false

        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(1, -10, 0, 40)
        toggle.Text = name .. ": Off"
        toggle.TextColor3 = Color3.new(1, 1, 1)
        toggle.BackgroundColor3 = Color3.new(0, 0, 0)
        toggle.BorderColor3 = Color3.new(1, 0, 0)
        toggle.Parent = buttonHolder

        toggle.MouseButton1Click:Connect(function()
            state = not state
            toggle.Text = name .. ": " .. (state and "On" or "Off")
            pcall(callback, state)
        end)

        toggleState[name] = state
    end

    return interface
end

return MainLibrary
